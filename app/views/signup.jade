extends ./partials/base.jade

block bodyContent 
    div(class="container-fluid")
        div(class="signup")
            form(action="/" method="post")
                h2 Sign Up
                div(class="row")
                    div(class="col-xs-6")
                        input(type="text" class="form-control" placeholder="First Name" name="firstname" required="required")
                    div(class="col-xs-6")
                        input(type="text" class="form-control" placeholder="Last Name" name="lastname" required="required")
                input(type="email" class="form-control" id="email" placeholder="Email" name="email" required="required")
                input(type="password" class="form-control" id="pwd" placeholder="Password" required="required")
                input(type="password" class="form-control" id="confirmPwd" placeholder="Confirm Password" name="password" required="required")
                input(id="hidden-color-input" type="userColor" class="form-control" placeholder="User Color" name="userColor" required="required" value="red")
                p Pick a user colour:
                div(class="row")
                    div(id="rune-icon-small-red" class="col-xs-2" onclick='selectIcon(0)')
                        img(class="roo-icon-small" src="/images/Roo.svg")
                        img(class="check-icon-small" src="/images/check.svg" style="opacity: 1")
                    div(id="rune-icon-small-redorange" class="col-xs-2" onclick='selectIcon(1)')
                        img(class="roo-icon-small"  src="/images/Roo.svg")
                        img(class="check-icon-small" src="/images/check.svg")
                    div(id="rune-icon-small-orange" class="col-xs-2" onclick='selectIcon(2)')
                        img(class="roo-icon-small"  src="/images/Roo.svg")
                        img(class="check-icon-small" src="/images/check.svg")
                    div(id="rune-icon-small-yelloworange" class="col-xs-2" onclick='selectIcon(3)')
                        img(class="roo-icon-small"  src="/images/Roo.svg")
                        img(class="check-icon-small" src="/images/check.svg")
                    div(id="rune-icon-small-yellow" class="col-xs-2" onclick='selectIcon(4)')
                        img(class="roo-icon-small"  src="/images/Roo.svg")
                        img(class="check-icon-small" src="/images/check.svg")
                    div(id="rune-icon-small-yellowgreen" class="col-xs-2" onclick='selectIcon(5)')
                        img(class="roo-icon-small"  src="/images/Roo.svg")
                        img(class="check-icon-small" src="/images/check.svg")
                    div(id="rune-icon-small-green" class="col-xs-2" onclick='selectIcon(6)')
                        img(class="roo-icon-small"  src="/images/Roo.svg")
                        img(class="check-icon-small" src="/images/check.svg")
                    div(id="rune-icon-small-bluegreen" class="col-xs-2" onclick='selectIcon(7)')
                        img(class="roo-icon-small"  src="/images/Roo.svg")
                        img(class="check-icon-small" src="/images/check.svg")
                    div(id="rune-icon-small-blue" class="col-xs-2" onclick='selectIcon(8)')
                        img(class="roo-icon-small"  src="/images/Roo.svg")
                        img(class="check-icon-small" src="/images/check.svg")
                    div(id="rune-icon-small-bluepurple" class="col-xs-2" onclick='selectIcon(9)')
                        img(class="roo-icon-small"  src="/images/Roo.svg")
                        img(class="check-icon-small" src="/images/check.svg")
                    div(id="rune-icon-small-purple" class="col-xs-2" onclick='selectIcon(10)')
                        img(class="roo-icon-small"  src="/images/Roo.svg")
                        img(class="check-icon-small" src="/images/check.svg")
                    div(id="rune-icon-small-redpurple" class="col-xs-2" onclick='selectIcon(11)')
                        img(class="roo-icon-small"  src="/images/Roo.svg")
                        img(class="check-icon-small" src="/images/check.svg")
                p(style="font-size:xx-small") By signing up, you consent to the terms of service of Rune.
                div(class="signup-btn")
                    button(id="submit" type="submit" class="btn btn-primary" style="width:140px") Sign Up
                h5(style="color:#e60000")=signupMessage

block scripts
    script.
        var valid = "#66afe9";
        var invalid = "#e60000";
        var unselected = "#ccc";

        var password = document.getElementById("pwd");
        var confirmPassword = document.getElementById("confirmPwd");
        var confirmValid = false;

        function validatePwd() {
            if (password.value != confirmPassword.value) {
                confirmValid = false;
                confirmPassword.setCustomValidity("Please enter passwords that match.");
                confirmPassword.style.borderColor = invalid;
            }
            else {
                confirmValid = true;
                confirmPassword.setCustomValidity("");
                confirmPassword.style.borderColor = valid;
            }
        }

        function enableConfirmPwdBorderColor() {
            if (confirmValid) {
                confirmPassword.style.borderColor = valid;
            }
            else {
                confirmPassword.style.borderColor = invalid;
            }
        }

        function disableConfirmPwdBorderColor() {
            confirmPassword.style.borderColor = unselected;

        }

        password.onchange = validatePwd;
        confirmPassword.onkeyup = validatePwd;
        confirmPassword.onfocus = enableConfirmPwdBorderColor;
        confirmPassword.onblur = disableConfirmPwdBorderColor;

        var checks = document.getElementsByClassName("check-icon-small");
        var colors = ["red", "redorange", "orange", "yelloworange", "yellow", "yellowgreen",
                      "green", "bluegreen", "blue", "bluepurple", "purple", "redpurple"];
        var colorInput = document.getElementById("hidden-color-input");
        var selected = 0;

        var selectIcon = function(selectColor) {
            if(selected != selectColor) {
                checks[selectColor].style.opacity = "1";
                colorInput.value = colors[selectColor];
                checks[selected].style.opacity = 0;
                selected = selectColor;
            }         
        }
